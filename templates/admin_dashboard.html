<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Admin Dashboard | QUICK BITE</title>
    <link rel="stylesheet"
          href="{{ url_for('static', filename='style/foodstyle.css') }}" />
</head>

<body class="admin-dashboard">

    <h1>Welcome, Admin</h1>
    <a href="{{ url_for('admin_logout') }}">
        <button>Logout</button>
    </a>

    <!-- ================= USERS TABLE ================= -->
    <h2>Registered Users</h2>
    <table border="1" cellpadding="8">
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Email</th>
            <th>Action</th>
        </tr>

        {% for user in users %}
        <tr>
            <td>{{ user[0] }}</td>
            <td>{{ user[1] }}</td>
            <td>{{ user[2] }}</td>
            <td>
                <form method="POST"
                      action="{{ url_for('delete_user', user_id=user[0]) }}">
                    <button type="submit"
                            onclick="return confirm('Delete this user?');">
                        Delete
                    </button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>

    <!-- ================= ORDERS TABLE ================= -->
    <h2>Orders</h2>

    <table border="1" cellpadding="8">
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Address</th>
            <th>Phone</th>
            <th>Item</th>
            <th>Quantity</th>
            <th>Price</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>

        {% for order in orders %}
        <tr>
            <td>{{ order[0] }}</td>          <!-- Order ID -->
            <td>{{ order[1] }}</td>          <!-- User Name -->
            <td>{{ order[2] }}</td>          <!-- Address -->
            <td>{{ order[3] }}</td>          <!-- Phone -->
            <td>{{ order[4] }}</td>          <!-- Item -->
            <td>{{ order[5] }}</td>          <!-- Quantity -->
            <td>â‚¹{{ order[6] }}</td>         <!-- Price -->
            <td><strong>{{ order[7] }}</strong></td> <!-- Status -->

            <td>
                <!-- Status Update Buttons -->
                <form action="{{ url_for('update_status', order_id=order[0]) }}"
                      method="POST"
                      style="display:inline;">
                    <button name="status" value="Preparing">ðŸŸ¡</button>
                    <button name="status" value="On Route">ðŸŸ </button>
                    <button name="status" value="Delivered">ðŸŸ¢</button>
                </form>

                <!-- Delete Order -->
                <form method="POST"
                      action="{{ url_for('delete_order', order_id=order[0]) }}"
                      style="display:inline;">
                    <button type="submit"
                            onclick="return confirm('Delete this order?');">
                        ðŸ—‘
                    </button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>

</body>
</html>